<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Citizen Umbrella - Lot Production & PO Flow</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:#f5f7fa;color:#333;
    }
    .layout{display:flex;min-height:100vh;}
    .sidebar{
      width:260px;background:linear-gradient(135deg,#208084,#1a6b6f);
      color:#fff;padding:24px 0;box-shadow:2px 0 8px rgba(0,0,0,.08);
      position:fixed;inset-block:0;overflow-y:auto;
    }
    .sidebar h2{padding:0 20px 20px;font-size:18px;border-bottom:1px solid rgba(255,255,255,.2);}
    .nav-item{
      padding:10px 20px;color:rgba(255,255,255,.8);cursor:pointer;
      border-left:4px solid transparent;transition:.25s;
    }
    .nav-item:hover,.nav-item.active{
      background:rgba(0,0,0,.08);border-left-color:#f2994e;color:#fff;
    }
    .main{margin-left:260px;flex:1;display:flex;flex-direction:column;}
    .topbar{
      background:#fff;padding:14px 22px;box-shadow:0 2px 6px rgba(0,0,0,.04);
      display:flex;justify-content:space-between;align-items:center;
    }
    .topbar h1{font-size:20px;color:#208084;}
    .content{padding:22px;}
    .section{display:none;}
    .section.active{display:block;}
    .card{
      background:#fff;border-radius:8px;padding:18px 20px;
      box-shadow:0 2px 8px rgba(0,0,0,.05);margin-bottom:18px;
    }
    .card h2{font-size:18px;margin-bottom:10px;color:#208084;}
    .row{display:flex;gap:16px;flex-wrap:wrap;}
    .col-6{flex:1 1 320px;}
    .form-group{margin-bottom:12px;}
    label{display:block;font-size:13px;margin-bottom:4px;color:#444;}
    input,select,textarea{
      width:100%;padding:8px 9px;border-radius:4px;border:1px solid #d0d4da;
      font:inherit;
    }
    textarea{resize:vertical;min-height:70px;}
    .btn{
      display:inline-block;border:none;border-radius:4px;
      padding:8px 14px;font-size:13px;cursor:pointer;
    }
    .btn-primary{background:#208084;color:#fff;}
    .btn-primary:hover{background:#1a6b6f;}
    .btn-light{background:#e9ecef;color:#333;}
    .btn-light:hover{background:#dde1e5;}
    .badge{
      display:inline-block;padding:4px 10px;border-radius:999px;
      font-size:11px;font-weight:600;
    }
    .badge-stage{background:#e3f2fd;color:#0b5394;}
    .badge-dying{background:#fff3cd;color:#856404;}
    .badge-finish{background:#e8f5e9;color:#2e7d32;}
    .badge-qc{background:#fce4ec;color:#ad1457;}
    .badge-dispatch{background:#d1c4e9;color:#4527a0;}
    table{width:100%;border-collapse:collapse;font-size:13px;}
    th,td{padding:8px 10px;border-bottom:1px solid #e4e7ec;text-align:left;}
    th{background:#f8fafc;color:#208084;font-weight:600;}
    tr:hover{background:#f9fafb;}
    .flow-steps{display:flex;flex-wrap:wrap;gap:10px;margin-top:6px;}
    .flow-step{
      flex:1 1 180px;padding:8px 10px;border-radius:6px;
      border:1px dashed #d0d4da;font-size:11px;background:#fafbff;
    }
    .flow-step strong{display:block;margin-bottom:4px;}
    .alert{
      display:none;margin-bottom:12px;padding:8px 10px;border-radius:4px;
      font-size:12px;
    }
    .alert.show{display:block;}
    .alert-success{background:#d4edda;color:#155724;border:1px solid #c3e6cb;}
    .stage-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;}
    .stage-header span{font-size:13px;}
    .checkbox-row{display:flex;flex-wrap:wrap;gap:10px;font-size:13px;margin-top:6px;}
    .checkbox-row label{display:flex;align-items:center;gap:4px;margin-bottom:0;}
    @media(max-width:768px){
      .sidebar{position:static;width:100%;display:flex;overflow-x:auto;}
      .sidebar h2{border:none;margin-bottom:0;padding-right:40px;}
      .nav-item{white-space:nowrap;}
      .main{margin-left:0;}
      .topbar{position:sticky;top:0;z-index:5;}
    }
  </style>
</head>
<body>
<div class="layout">
  <aside class="sidebar">
    <h2>☂ Citizen Umbrella</h2>
    <div class="nav-item active" data-sec="customer-po">Customer PO Form</div>
    <div class="nav-item" data-sec="lot-production">Lot Production (Admin)</div>
  </aside>

  <main class="main">
    <header class="topbar">
      <h1 id="pageTitle">Customer PO Form</h1>
      <span>Prototype – Flow After Sample Confirmation</span>
    </header>

    <section class="content">
      <!-- ALERT -->
      <div id="alert" class="alert alert-success"></div>

      <!-- CUSTOMER PO FORM SECTION -->
      <div id="customer-po" class="section active">
        <div class="card">
          <h2>Customer Purchase Order (After Sample Approval)</h2>
          <p style="font-size:13px;margin-bottom:10px;">
            Customer fills this form once sample is confirmed. Submitted PO will appear in Admin → Lot Production.
          </p>
          <form id="poForm">
            <div class="row">
              <div class="col-6">
                <div class="form-group">
                  <label>PO Number (Customer Ref)</label>
                  <input type="text" name="poNumber" placeholder="Customer PO ref" required />
                </div>
                <div class="form-group">
                  <label>Customer Name</label>
                  <input type="text" name="customerName" placeholder="Company / Buyer name" required />
                </div>
                <div class="form-group">
                  <label>Contact Person</label>
                  <input type="text" name="contactPerson" placeholder="Contact person" />
                </div>
                <div class="form-group">
                  <label>Material Required</label>
                  <select name="material" required>
                    <option value="">Select material</option>
                    <option>Nylon</option>
                    <option>Polyester</option>
                    <option>Pongee</option>
                    <option>Custom Leather Grain</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Design / Pattern</label>
                  <textarea name="design" placeholder="Describe design, colour, print, logo, panel etc." required></textarea>
                </div>
              </div>
              <div class="col-6">
                <div class="form-group">
                  <label>Quantity Required</label>
                  <input type="number" name="qty" min="1" placeholder="e.g. 500" required />
                </div>
                <div class="form-group">
                  <label>Required Grain</label>
                  <input type="text" name="grain" placeholder="Grain name / code" required />
                </div>
                <div class="form-group">
                  <label>Required Delivery Date</label>
                  <input type="date" name="deliveryDate" required />
                </div>
                <div class="form-group">
                  <label>Special Instructions</label>
                  <textarea name="instructions" placeholder="Any special requirement (packing, stitching, handle type, etc.)"></textarea>
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Submit PO (Customer)</button>
          </form>
        </div>

        <div class="card">
          <h2>Flow Summary</h2>
          <div class="flow-steps">
            <div class="flow-step">
              <strong>1. PO Submitted</strong>
              Goes to Admin → Lot Production as a new lot.
            </div>
            <div class="flow-step">
              <strong>2. Grain Check</strong>
              Admin verifies required grain availability for lot.
            </div>
            <div class="flow-step">
              <strong>3. Dying Stage</strong>
              QC card + Shade check, possible Re‑Dying.
            </div>
            <div class="flow-step">
              <strong>4. Finish & Coating</strong>
              Digital print / No design / Printing emboss.
            </div>
            <div class="flow-step">
              <strong>5. Folding → Dispatch</strong>
              Final product folded, packed, dispatched.
            </div>
          </div>
        </div>
      </div>

      <!-- LOT PRODUCTION ADMIN SECTION -->
      <div id="lot-production" class="section">
        <div class="card">
          <h2>Lot Production – Admin View</h2>
          <p style="font-size:13px;margin-bottom:10px;">
            All POs submitted by customers will appear here as lots. Admin controls production stages.
          </p>
          <div style="margin-bottom:10px;font-size:13px;">
            Legend:
            <span class="badge badge-stage">New Lot</span>
            <span class="badge badge-dying">Dying</span>
            <span class="badge badge-finish">Finish & Coating</span>
            <span class="badge badge-qc">QC</span>
            <span class="badge badge-dispatch">Dispatch</span>
          </div>
        </div>

        <div class="card">
          <div class="stage-header">
            <h2>Lots in Production</h2>
            <button class="btn btn-light" onclick="seedExampleLot()">Add Demo Lot</button>
          </div>
          <table id="lotTable">
            <thead>
            <tr>
              <th>Lot / PO</th>
              <th>Customer</th>
              <th>Material / Grain</th>
              <th>Current Stage</th>
              <th>Details / Actions</th>
            </tr>
            </thead>
            <tbody>
            <!-- JS will inject rows -->
            </tbody>
          </table>
        </div>

        <div class="card">
          <h2>Stage Details – Example Structure (Read‑only for Demo)</h2>

          <!-- 1. GRAIN CHECK -->
          <div class="card" style="margin-top:10px;">
            <div class="stage-header">
              <span><strong>1. Grain Availability Check</strong></span>
              <span class="badge badge-stage">New Lot</span>
            </div>
            <p style="font-size:13px;">
              Admin verifies if requested grain is available in store.
              If available → move lot to Dying stage.
              If not available → hold or raise raw material requirement.
            </p>
          </div>

          <!-- 2. DYING STAGE -->
          <div class="card" style="margin-top:10px;">
            <div class="stage-header">
              <span><strong>2. Dying Stage</strong></span>
              <span class="badge badge-dying">Dying</span>
            </div>
            <div class="row">
              <div class="col-6">
                <h3 style="font-size:14px;margin-bottom:6px;">QC Check Card</h3>
                <div class="form-group">
                  <label>QC Status</label>
                  <select disabled>
                    <option>Pending</option>
                    <option>Passed</option>
                    <option>Rejected</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>QC Report (Attachment / Notes)</label>
                  <textarea disabled placeholder="In real system, upload QC report / write remarks"></textarea>
                </div>
              </div>
              <div class="col-6">
                <h3 style="font-size:14px;margin-bottom:6px;">Shade Check</h3>
                <div class="checkbox-row">
                  <label><input type="checkbox" disabled /> Shade OK – move to Drying</label>
                  <label><input type="checkbox" disabled /> Shade Not OK – send for Re‑Dying</label>
                </div>
                <p style="font-size:12px;margin-top:6px;">
                  In actual system admin will tick Shade OK or Re‑Dying.
                  After final OK, lot moves to Finish & Coating.
                </p>
              </div>
            </div>
          </div>

          <!-- 3. FINISH & COATING -->
          <div class="card" style="margin-top:10px;">
            <div class="stage-header">
              <span><strong>3. Finish & Coating Stage</strong></span>
              <span class="badge badge-finish">Finish & Coating</span>
            </div>
            <p style="font-size:13px;">
              Separate stage from Dying. Apply final finish, coating, and design as per PO.
            </p>
            <div class="checkbox-row">
              <label><input type="checkbox" disabled /> Digital Print</label>
              <label><input type="checkbox" disabled /> No Design (Plain)</label>
              <label><input type="checkbox" disabled /> Printing Emboss</label>
            </div>
            <p style="font-size:12px;margin-top:6px;">
              If Digital Print selected → status for job work on paper (outsourced job).
              If No Design or Printing Emboss → directly move to Folding stage.
            </p>
          </div>

          <!-- 4. FOLDING & DISPATCH -->
          <div class="card" style="margin-top:10px;">
            <div class="stage-header">
              <span><strong>4. Folding → Dispatch</strong></span>
              <span class="badge badge-dispatch">Final</span>
            </div>
            <p style="font-size:13px;">
              After Finish & Coating, all items move to Folding stage, packing, then Dispatch.
              Final dispatch closes the lot for that PO.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
  const navItems = document.querySelectorAll('.nav-item');
  const sections = document.querySelectorAll('.section');
  const pageTitle = document.getElementById('pageTitle');
  const alertBox = document.getElementById('alert');
  const lotTableBody = document.querySelector('#lotTable tbody');

  function showAlert(msg){
    alertBox.textContent = msg;
    alertBox.classList.add('show');
    setTimeout(()=>alertBox.classList.remove('show'),2500);
  }

  // Navigation
  navItems.forEach(item=>{
    item.addEventListener('click',()=>{
      navItems.forEach(n=>n.classList.remove('active'));
      item.classList.add('active');
      const id = item.dataset.sec;
      sections.forEach(sec=>sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      pageTitle.textContent = item.textContent;
    });
  });

  // Store lots in memory (demo only)
  const lots = [];

  // When customer submits PO, create a lot in admin list
  document.getElementById('poForm').addEventListener('submit',e=>{
    e.preventDefault();
    const data = new FormData(e.target);
    const lot = {
      id: 'LOT-' + String(lots.length+1).padStart(3,'0'),
      poNumber: data.get('poNumber'),
      customer: data.get('customerName'),
      material: data.get('material'),
      grain: data.get('grain'),
      stage: 'Grain Check'
    };
    lots.push(lot);
    renderLots();
    e.target.reset();
    showAlert('PO submitted. Lot '+lot.id+' created in Admin → Lot Production.');
  });

  function renderLots(){
    lotTableBody.innerHTML = '';
    lots.forEach(lot=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${lot.id}<br/><small>${lot.poNumber}</small></td>
        <td>${lot.customer}</td>
        <td>${lot.material}<br/><small>Grain: ${lot.grain}</small></td>
        <td>${renderStageBadge(lot.stage)}</td>
        <td>
          <button class="btn btn-light" onclick="advanceStage('${lot.id}')">Next Stage</button>
          <small style="display:block;margin-top:4px;">Current: ${lot.stage}</small>
        </td>
      `;
      lotTableBody.appendChild(tr);
    });
  }

  function renderStageBadge(stage){
    if(stage==='Grain Check') return '<span class="badge badge-stage">Grain Check</span>';
    if(stage==='Dying') return '<span class="badge badge-dying">Dying</span>';
    if(stage==='Finish & Coating') return '<span class="badge badge-finish">Finish & Coating</span>';
    if(stage==='Folding') return '<span class="badge badge-qc">Folding</span>';
    if(stage==='Dispatch') return '<span class="badge badge-dispatch">Dispatch</span>';
    return '<span class="badge">'+stage+'</span>';
  }

  function advanceStage(lotId){
    const lot = lots.find(l=>l.id===lotId);
    if(!lot) return;
    const order = ['Grain Check','Dying','Finish & Coating','Folding','Dispatch'];
    const idx = order.indexOf(lot.stage);
    if(idx<order.length-1){
      lot.stage = order[idx+1];
      renderLots();
      showAlert('Lot '+lot.id+' moved to '+lot.stage+' stage.');
    }else{
      showAlert('Lot '+lot.id+' already at final stage.');
    }
  }

  // Seed one example lot for demo quickly
  function seedExampleLot(){
    const lot = {
      id:'LOT-000',
      poNumber:'DEMO-PO-001',
      customer:'Demo Buyer',
      material:'Nylon',
      grain:'Standard Grain A',
      stage:'Dying'
    };
    lots.push(lot);
    renderLots();
    showAlert('Demo lot added.');
  }
</script>
</body>
</html>
